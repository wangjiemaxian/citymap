<!DOCTYPE html>
<!--suppress ALL -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        #allmap {
            width: 100%;
            height: 500px;
        }

        p {
            margin-left: 5px;
            font-size: 14px;
        }
    </style>
<!--百度地图api  ak=cRRLnnvclpwkpkIS5hqahETVvbbWpo7l此为密钥  必须-->
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=cRRLnnvclpwkpkIS5hqahETVvbbWpo7l"></script>
    <title>百度地图圆形地理围栏demo</title>
    <script src="jquery.min.js"></script>
</head>
<body>
<!--百度地图-->
<div id="allmap"></div>

<!--按钮组件-->
<span>1城市</span><input type="text" id="city">
<button id="button1">确定</button>
<br>
<br>
<span>2经度</span><input type="text" id="jingdu">
<span>纬度</span><input type="text" id="weidu">
<span>半径</span><input type="text" id="banjing">
<button id="button2">确定</button>

<br>
<br>
<span>3场景搜索</span><input type="text" id="didian">
<button id="button3">搜索</button>

<br>
<br>

</body>

</html>
<script type="text/javascript">

    $(function () {

        // 百度地图API功能,创建map
        var map = new BMap.Map("allmap");
        map.enableScrollWheelZoom();
        map.centerAndZoom('上海', 15);

        //城市设置
        $("#button1").click(function () {
            var city = $("#city").val();
            var map = new BMap.Map("allmap");
            map.enableScrollWheelZoom();
            map.centerAndZoom(city, 15);

            //获取鼠标点击的经纬度
            map.addEventListener("click", function (e) {
                var jingdu = $("#jingdu").val(e.point.lng);
                var weidu = $("#weidu").val(e.point.lat);
            });

            //圆形区域检索事件开始
            $("#button2").click(function () {

                var banjing = $("#banjing").val();
                var jingdu = $("#jingdu").val();
                var weidu = $("#weidu").val();
                var didian = $("#didian").val();

                var map = new BMap.Map("allmap");
                var mPoint = new BMap.Point(jingdu, weidu);
                map.enableScrollWheelZoom();
                map.centerAndZoom(mPoint, 15);

                var circle = new BMap.Circle(mPoint, banjing, {
                    fillColor: "blue",
                    strokeWeight: 1,
                    fillOpacity: 0.3,
                    strokeOpacity: 0.3
                });
                map.addOverlay(circle);

                //地址搜索
                $("#button3").click(function () {
                    var banjing = $("#banjing").val();
                    var jingdu = $("#jingdu").val();
                    var weidu = $("#weidu").val();
                    var didian = $("#didian").val();

                    var map = new BMap.Map("allmap");
                    var mPoint = new BMap.Point(jingdu, weidu);
                    map.enableScrollWheelZoom();
                    map.centerAndZoom(mPoint, 15);

                    var circle = new BMap.Circle(mPoint, banjing, {
                        fillColor: "blue",
                        strokeWeight: 1,
                        fillOpacity: 0.3,
                        strokeOpacity: 0.3
                    });
                    map.addOverlay(circle);
                    var local = new BMap.LocalSearch(map, {renderOptions: {map: map, autoViewport: false}});
                    local.searchNearby(didian, mPoint, 1000);
                    radiu
                })

            });
            //圆形区域检索事件结束

        })

    })



</script>